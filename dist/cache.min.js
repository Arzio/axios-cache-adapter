!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("lodash/omit"),require("lodash/isFunction"),require("axios"),require("lodash/merge"),require("lodash/isString"),require("lodash/size"),require("lodash/map"),require("lodash/extend"),require("lodash/find"),require("lodash/isEmpty")):"function"==typeof define&&define.amd?define(["lodash/omit","lodash/isFunction","axios","lodash/merge","lodash/isString","lodash/size","lodash/map","lodash/extend","lodash/find","lodash/isEmpty"],r):"object"==typeof exports?exports.axiosCacheAdapter=r(require("lodash/omit"),require("lodash/isFunction"),require("axios"),require("lodash/merge"),require("lodash/isString"),require("lodash/size"),require("lodash/map"),require("lodash/extend"),require("lodash/find"),require("lodash/isEmpty")):e.axiosCacheAdapter=r(e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0],e[void 0])}(this,function(e,r,t,n,u,a,o,i,c,s){return function(e){function r(n){if(t[n])return t[n].exports;var u=t[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,r),u.l=!0,u.exports}var t={};return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=3)}([function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(u,a){try{var o=r[u](a),i=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function a(e){if((0,l.default)(e.key))return e.key;return(0,s.default)(e.key)?function(r){return e.key+"/"+r.url}:function(e){return e.url}}Object.defineProperty(r,"__esModule",{value:!0}),r.key=r.write=r.read=void 0;var o=function(){var e=u(regeneratorRuntime.mark(function e(r,t,n){var u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u={expires:r.expires,data:(0,p.default)(r,t,n)},e.next=4,r.store.setItem(r.uuid,u);case 4:e.next=19;break;case 6:if(e.prev=6,e.t0=e.catch(0),r.debug("Could not store response",e.t0),!r.clearOnError){e.next=18;break}return e.prev=10,e.next=13,r.store.clear();case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(10),r.debug("Could not clear store",e.t1);case 18:return e.abrupt("return",!1);case 19:return e.abrupt("return",!0);case 20:case"end":return e.stop()}},e,this,[[0,6],[10,15]])}));return function(r,t,n){return e.apply(this,arguments)}}(),i=function(){var e=u(regeneratorRuntime.mark(function e(r,t){var n,u,a,o,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.uuid,e.next=3,r.store.getItem(n);case 3:if((u=e.sent)&&u.data){e.next=10;break}throw r.debug("cache-miss",t.url),a=new Error,a.reason="cache-miss",a.message="Entry not found from cache",a;case 10:if(o=u.expires,i=u.data,!(0!==o&&o<Date.now())){e.next=17;break}throw r.debug("cache-stale",t.url),c=new Error,c.reason="cache-stale",c.message="Entry is stale",c;case 17:return r.debug("cache-hit",t.url),e.abrupt("return",i);case 19:case"end":return e.stop()}},e,this)}));return function(r,t){return e.apply(this,arguments)}}(),c=t(6),s=n(c),f=t(2),l=n(f),d=t(7),p=n(d);r.read=i,r.write=o,r.key=a,r.default={read:i,write:o,key:a}},function(r,t){r.exports=e},function(e,t){e.exports=r},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(u,a){try{var o=r[u](a),i=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function a(){var e=function(){var e=u(regeneratorRuntime.mark(function e(t){var n,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.default)(r,t);case 2:if(n=e.sent,u=n.next,(0,h.default)(u)){e.next=6;break}return e.abrupt("return",u);case 6:return e.next=8,r.adapter(t);case 8:return n=e.sent,e.abrupt("return",u(n));case 10:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}(),r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r=(0,d.default)({},g.cache,r),r.key=(0,v.key)(r),!1!==r.debug?r.debug="function"==typeof r.debug?r.debug:function(){for(var e,r=arguments.length,t=Array(r),n=0;n<r;n++)t[n]=arguments[n];return(e=console).log.apply(e,["[axios-cache-adapter]"].concat(t))}:r.debug=function(){},r.store||(r.store=new m.default),{adapter:e,store:r.store}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=(0,d.default)({},g.axios,e);var r=a(e.cache),t=(0,f.default)(e,["cache"]),n=c.default.create((0,d.default)({},t,{adapter:r.adapter}));return n.cache=r.store,n}Object.defineProperty(r,"__esModule",{value:!0}),r.setupCache=r.setup=void 0;var i=t(4),c=n(i),s=t(1),f=n(s),l=t(5),d=n(l),p=t(2),h=n(p),v=t(0),x=t(8),m=n(x),y=t(11),b=n(y),g={cache:{maxAge:0,limit:!1,store:null,key:null,exclude:{paths:[],query:!0,filter:null},adapter:c.default.defaults.adapter,clearOnStale:!0,clearOnError:!0,debug:!1},axios:{cache:{maxAge:9e5}}};r.setup=o,r.setupCache=a,r.default={setup:o,setupCache:a}},function(e,r){e.exports=t},function(e,r){e.exports=n},function(e,r){e.exports=u},function(e,r,t){"use strict";function n(e,r,t){if(t.data)try{t.data=JSON.parse(t.data)}catch(r){e.debug("Could not parse data as JSON",r)}return(0,a.default)(t,["request","config"])}Object.defineProperty(r,"__esModule",{value:!0});var u=t(1),a=function(e){return e&&e.__esModule?e:{default:e}}(u);r.default=n},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(u,a){try{var o=r[u](a),i=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),i=t(9),c=n(i),s=t(10),f=n(s),l=function(){function e(){a(this,e),this.store={}}return o(e,[{key:"getItem",value:function(){function e(e){return r.apply(this,arguments)}var r=u(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.store[r]||null);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"setItem",value:function(){function e(e,t){return r.apply(this,arguments)}var r=u(regeneratorRuntime.mark(function e(r,t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.store[r]=t,e.abrupt("return",t);case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"removeItem",value:function(){function e(e){return r.apply(this,arguments)}var r=u(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:delete this.store[r];case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"clear",value:function(){function e(){return r.apply(this,arguments)}var r=u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.store={};case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"length",value:function(){function e(){return r.apply(this,arguments)}var r=u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)(this.store));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"iterate",value:function(e){return Promise.all((0,f.default)(this.store,function(r,t){return e(r,t)}))}}]),e}();r.default=l},function(e,r){e.exports=a},function(e,r){e.exports=o},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(u,a){try{var o=r[u](a),i=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){var e=u(regeneratorRuntime.mark(function e(r,t){var n,u,a,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=function(){return r.excludeFromCache=!0,{config:r,next:u}},n=r.key(t),r=(0,i.default)({},r,{uuid:n}),u=function(){for(var e=arguments.length,n=Array(e),u=0;u<e;u++)n[u]=arguments[u];return s.default.apply(void 0,[r,t].concat(n))},!(0,l.default)(r,t)){e.next=6;break}return e.abrupt("return",c());case 6:if("head"!==(a=t.method.toLowerCase())){e.next=9;break}return e.abrupt("return",c());case 9:if("get"===a){e.next=13;break}return e.next=12,r.store.removeItem(n);case 12:return e.abrupt("return",c());case 13:return e.prev=13,e.next=16,(0,d.read)(r,t);case 16:return o=e.sent,o.config=t,o.request={fromCache:!0},e.abrupt("return",{config:r,next:o});case 22:if(e.prev=22,e.t0=e.catch(13),!r.clearOnStale||"cache-stale"!==e.t0.reason){e.next=27;break}return e.next=27,r.store.removeItem(n);case 27:return e.abrupt("return",{config:r,next:u});case 28:case"end":return e.stop()}},e,this,[[13,22]])}));return function(r,t){return e.apply(this,arguments)}}(),o=t(12),i=n(o),c=t(13),s=n(c),f=t(15),l=n(f),d=t(0);r.default=a},function(e,r){e.exports=i},function(e,r,t){"use strict";function n(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(u,a){try{var o=r[u](a),i=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){var e=n(regeneratorRuntime.mark(function e(r,t,n){var u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(2===(u=n.status/100|0)){e.next=3;break}return e.abrupt("return",n);case 3:if(!(["arraybuffer","blob"].indexOf(n.responseType)>-1)){e.next=5;break}return e.abrupt("return",n);case 5:if(r.excludeFromCache){e.next=13;break}if(r.expires=0===r.maxAge?0:Date.now()+r.maxAge,!r.limit){e.next=11;break}return r.debug("Detected limit: "+r.limit),e.next=11,(0,o.default)(r);case 11:return e.next=13,(0,i.write)(r,t,n);case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}},e,this)}));return function(r,t,n){return e.apply(this,arguments)}}(),a=t(14),o=function(e){return e&&e.__esModule?e:{default:e}}(a),i=t(0);r.default=u},function(e,r,t){"use strict";function n(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(u,a){try{var o=r[u](a),i=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){var e=n(regeneratorRuntime.mark(function e(r){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.store.length();case 2:if(!((t=e.sent)<r.limit)){e.next=5;break}return e.abrupt("return");case 5:return r.debug("Current store size: "+t),n=void 0,e.next=9,r.store.iterate(function(e,r){n||(n={value:e,key:r}),e.expires<n.value.expires&&(n={value:e,key:r})});case 9:if(!n){e.next=13;break}return r.debug("Removing item: "+n.key),e.next=13,r.store.removeItem(n.key);case 13:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}();r.default=u},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1],t=e.exclude,n=void 0===t?{}:t,u=e.debug;if("function"==typeof n.filter&&n.filter(r))return u("Excluding request by filter "+r.url),!0;var a=r.url.match(/\?.*$/)||!(0,c.default)(r.params);if(n.query&&a)return u("Excluding request by query "+r.url),!0;var i=n.paths||[];return!!(0,o.default)(i,function(e){return r.url.match(e)})&&(u("Excluding request by url match "+r.url),!0)}Object.defineProperty(r,"__esModule",{value:!0});var a=t(16),o=n(a),i=t(17),c=n(i);r.default=u},function(e,r){e.exports=c},function(e,r){e.exports=s}])});
//# sourceMappingURL=cache.min.js.map